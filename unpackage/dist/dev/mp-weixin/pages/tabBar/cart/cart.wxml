<view><block wx:if="{{showHeader}}"><view class="status" style="{{'position:'+(headerPosition)+';'+('top:'+(statusTop)+';')}}"></view></block><block wx:if="{{showHeader}}"><view class="header" style="{{'position:'+(headerPosition)+';'+('top:'+(headerTop)+';')}}"><view class="title">购物车</view></view></block><block wx:if="{{showHeader}}"><view class="place"></view></block><view class="goods-list"><block wx:if="{{goodsList.length==0&&mch_list.length==0}}"><view class="tis">购物车是空的哦~</view></block><block wx:if="{{goodsList&&goodsList.length}}"><block><view class="goods-box"><view class="shop-name"><view class="checkbox-box"><view data-event-opts="{{[['tap',[['selectShop',['self']]]]]}}" class="checkbox" bindtap="__e"><view class="{{[check_all_self?'on':'']}}"></view></view></view><view>平台自营</view></view><block wx:for="{{goodsList}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row"><view data-event-opts="{{[['tap',[['deleteGoods',['$0'],[[['goodsList','',index,'cart_id']]]]]]]}}" class="menu" catchtap="__e"><view class="icon shanchu"></view></view><view data-event-opts="{{[['touchstart',[['touchStart',['$0','$event'],[[['goodsList','',index,'cart_id']]]]]],['touchmove',[['touchMove',['$0','$event'],[[['goodsList','',index,'cart_id']]]]]],['touchend',[['touchEnd',['$0','$event'],[[['goodsList','',index,'cart_id']]]]]]]}}" class="{{['carrier',theIndex==row.cart_id?'open':oldIndex==row.cart_id?'close':'']}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"><view class="checkbox-box"><block wx:if="{{!row.disabled}}"><view data-event-opts="{{[['tap',[['selected',['self',index,0]]]]]}}" class="checkbox" bindtap="__e"><view class="{{[row.selected?'on':'']}}"></view></view></block></view><view data-event-opts="{{[['tap',[['toGoods',['$0'],[[['goodsList','',index]]]]]]]}}" class="goods-info" bindtap="__e"><view class="img"><image src="{{row.goods_pic}}"></image></view><view class="info"><view class="title">{{row.goods_name}}</view><view class="spec"><block wx:for="{{row.attr_list}}" wx:for-item="item" wx:for-index="index"><view>{{''+item.attr_group_name+":"+item.attr_name+''}}</view></block></view><view class="price-number"><view class="price">{{"￥"+row.unitPrice}}</view><block wx:if="{{row.max_num>=row.num}}"><view class="number"><view class="sub" id="{{row.cart_id}}" data-event-opts="{{[['tap',[['sub',['$event']]]]]}}" catchtap="__e"><view class="icon jian"></view></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="input" catchtap="__e"><input type="number" data-event-opts="{{[['input',[['__set_model',['$0','num','$event',[]],[[['goodsList','',index]]]],['sum',['$event',index]]]],['blur',[['taol',['$event',index]]]]]}}" value="{{row.num}}" bindinput="__e" bindblur="__e"/></view><view class="add" id="{{row.cart_id}}" data-event-opts="{{[['tap',[['add',['$event']]]]]}}" catchtap="__e"><view class="icon jia"></view></view></view></block><block wx:else><view class="max-num">库存不足</view></block></view></view></view></view></view></block></view></block></block><block wx:if="{{mch_list&&mch_list.length}}"><block><block wx:for="{{mch_list}}" wx:for-item="item" wx:for-index="mch_index"><block><view class="goods-box"><view class="shop-name"><view class="checkbox-box"><view data-event-opts="{{[['tap',[['selectShop',['mch',mch_index]]]]]}}" class="checkbox" bindtap="__e"><view class="{{[item.selected_all?'on':'']}}"></view></view></view><view>{{item.name}}</view></view><block wx:for="{{item.list}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row"><view data-event-opts="{{[['tap',[['deleteGoods',['$0'],[[['mch_list','',mch_index],['list','',index,'cart_id']]]]]]]}}" class="menu" catchtap="__e"><view class="icon shanchu"></view></view><view data-event-opts="{{[['touchstart',[['touchStart',['$0','$event'],[[['mch_list','',mch_index],['list','',index,'cart_id']]]]]],['touchmove',[['touchMove',['$0','$event'],[[['mch_list','',mch_index],['list','',index,'cart_id']]]]]],['touchend',[['touchEnd',['$0','$event'],[[['mch_list','',mch_index],['list','',index,'cart_id']]]]]]]}}" class="{{['carrier',theIndex==row.cart_id?'open':oldIndex==row.cart_id?'close':'']}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"><view class="checkbox-box"><block wx:if="{{!row.disabled}}"><view data-event-opts="{{[['tap',[['selected',['mch',index,mch_index]]]]]}}" class="checkbox" bindtap="__e"><view class="{{[row.selected?'on':'']}}"></view></view></block></view><view data-event-opts="{{[['tap',[['toGoods',['$0'],[[['mch_list','',mch_index],['list','',index]]]]]]]}}" class="goods-info" bindtap="__e"><view class="img"><image src="{{row.goods_pic}}"></image></view><view class="info"><view class="title">{{row.goods_name}}</view><view class="spec"><block wx:for="{{row.attr_list}}" wx:for-item="item" wx:for-index="index"><view>{{''+item.attr_group_name+":"+item.attr_name+''}}</view></block></view><view class="price-number"><view class="price">{{"￥"+row.unitPrice}}</view><block wx:if="{{row.max_num>=row.num}}"><view class="number"><view class="sub" id="{{row.cart_id}}" data-event-opts="{{[['tap',[['sub',['$event','mch',index,mch_index]]]]]}}" catchtap="__e"><view class="icon jian"></view></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="input" catchtap="__e"><input type="number" data-event-opts="{{[['input',[['__set_model',['$0','num','$event',[]],[[['mch_list','',mch_index],['list','',index]]]],['sum',['$event',index]]]],['blur',[['taol',['$event',index,'mch',mch_index]]]]]}}" value="{{row.num}}" bindinput="__e" bindblur="__e"/></view><view class="add" id="{{row.cart_id}}" data-event-opts="{{[['tap',[['add',['$event','mch',index,mch_index]]]]]}}" catchtap="__e"><view class="icon jia"></view></view></view></block><block wx:else><view class="max-num">库存不足</view></block></view></view></view></view></view></block></view></block></block></block></block></view><view class="footer" style="{{'bottom:'+(footerbottom)+';'}}"><view data-event-opts="{{[['tap',[['allSelect',['$event']]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[isAllselected?'on':'']}}"></view></view><view class="text">全选</view></view><block wx:if="{{selectedList.length>0}}"><view data-event-opts="{{[['tap',[['deleteList',['$event']]]]]}}" class="delBtn" bindtap="__e">删除</view></block><view class="settlement"><view class="sum">合计:<view class="money">{{"￥"+sumPrice}}</view></view><view data-event-opts="{{[['tap',[['toConfirmation',['$event']]]]]}}" class="btn" bindtap="__e">{{"结算("+selectedList.length+")"}}</view></view></view></view>